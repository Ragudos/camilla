---
import { Icon } from "astro-icon/components";
import type { CollectionEntry } from "astro:content";

export interface Props {
  posts: Array<CollectionEntry<"blog">>;
}

const { posts } = Astro.props;
---

<div class="grid auto-rows-fr grid-cols-1 tablet:grid-cols-2">
  {
    posts.map((post, index) => (
      <article class="relative isolate flex flex-col justify-end overflow-hidden rounded-2xl bg-stone-950 px-8 pb-8 pt-32 phone:pt-64 tablet:pt-30">
        <img
          src={post.data.image.src}
          alt={post.data.image.alt}
          class="absolute inset-0 -z-10 h-full w-full object-cover"
        />
        <div
          role="presentation"
          class="absolute inset-0 -z-10 bg-linear-to-t from-gray-900 via-gray-900/40"
        />
        <div
          role="presentation"
          class="absolute inset-0 -z-10 rounded-2xl ring-1 ring-inset ring-gray-900/10"
        />

        <div class="flex justify-center flex-wrap items-center gap-y-1 overflow-hidden text-sm leading-6 text-gray-300">
          <time datetime={post.data.publishDate.toDateString()} class="mr-8">
            {post.data.publishDate.toDateString()}
          </time>
          <div class="-ml-4 flex items-center gap-x-4">
            <svg
              viewBox="0 0 2 2"
              class="-ml-0.5 h-0.5 w-0.5 flex-none fill-white/50"
            >
              <circle cx="1" cy="1" r="1" />
            </svg>
            <div class="flex items-center gap-x-2.5">
              <Icon name="carbon:user-avatar-filled-alt" width="20" />
              {post.data.author}
            </div>
          </div>
        </div>

        <h2 class="mt-3 text-lg  font-semibold leading-6 text-white">
          <a href={`/blog/${post.id}`}>
            <span class="absolute inset-0" />
            {post.data.title}
          </a>
        </h2>

        <h3 class="pt-3 text-xs font-medium text-gray-300 uppercase tracking-wider">
          <a href={`/category/${post.data.category.toLowerCase()}`}>
            {post.data.category}
          </a>
        </h3>
      </article>
    ))
  }
</div>
